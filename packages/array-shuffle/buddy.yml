- pipeline: "Linting & testing"
  trigger_mode: "ON_EVERY_PUSH"
  ref_name: "refs/pull/*"
  ref_type: "WILDCARD"
  actions:
  - action: "Linting"
    type: "BUILD"
    working_directory: "/buddy/array-shuffle"
    docker_image_name: "library/node"
    docker_image_tag: "lts"
    execute_commands:
    - "yarn install"
    - "yarn lint"
    mount_filesystem_path: "/buddy/array-shuffle"
    shell: "BASH"
    trigger_condition: "ALWAYS"
  - action: "Testing"
    type: "BUILD"
    working_directory: "/buddy/array-shuffle"
    docker_image_name: "library/node"
    docker_image_tag: "lts"
    execute_commands:
    - "yarn install"
    - "yarn test"
    mount_filesystem_path: "/buddy/array-shuffle"
    shell: "BASH"
    trigger_condition: "ALWAYS"
- pipeline: "Deploy to NPM"
  trigger_mode: "ON_EVERY_PUSH"
  ref_name: "master"
  ref_type: "BRANCH"
  actions:
  - action: "Deploy to NPM"
    type: "BUILD"
    working_directory: "/buddy/array-shuffle"
    docker_image_name: "library/node"
    docker_image_tag: "lts"
    execute_commands:
    - "npm-cli-login -u '${NPM_LOGIN}' -p '${NPM_PASSWORD}' -e '${NPM_EMAIL}'"
    - "npm publish"
    setup_commands:
    - "npm install -g npm-cli-login publish"
    mount_filesystem_path: "/buddy/array-shuffle"
    shell: "BASH"
    trigger_condition: "ALWAYS"
